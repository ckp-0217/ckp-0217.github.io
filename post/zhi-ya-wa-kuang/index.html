<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
<meta name="description" content="区块链、web3、金融、智能合约" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>质押挖矿 | Wild</title>
<link rel="shortcut icon" href="https://ckp-0217.github.io/favicon.ico?v=1685365345190">
<link rel="stylesheet" href="https://ckp-0217.github.io/styles/main.css">


    <link rel="canonical" href="https://ckp-0217.github.io/post/zhi-ya-wa-kuang/" />
    <meta name="socialText" content="" />
    <meta name="description" content="质押类别
单币质押
双币质押
lp质押
NFT质押
质押周期
任意时间
年月日
区块
产出
时间、区块 固定产出
时间、区块 固定产出 半衰期
质押数量 固定产出
计算原理
链上不适合做定时任务去更新区块的挖矿数量，但是可以通过每次更新质押..." />
    <meta name="referrer" content="always" />
    
      <link rel="stylesheet" href="https://ckp-0217.github.io/media/css/katex.min.css">
      <script defer src="https://ckp-0217.github.io/media/scripts/katex.min.js"></script>
      <script defer src="https://ckp-0217.github.io/media/scripts/auto-render.min.js"
        onload="renderMathInElement(document.body);"></script>
      
        
          <link rel="stylesheet" href="https://ckp-0217.github.io/media/css/prism.css">
          
            
                
</head>

<body class="is-preload">
  <!-- Wrapper -->
  <div id="wrapper">

    <!-- Header -->
<header id="header">
  <div class="inner">
    <!-- Logo -->
    <a href="https://ckp-0217.github.io" class="logo">
      
          <span class="symbol"><img src="https://ckpdebucket.oss-cn-hangzhou.aliyuncs.com/5899.png" alt="" />
            
                <img src="https://ckpdebucket.oss-cn-hangzhou.aliyuncs.com/wild.png" alt="" />
                
                
          </span>
          


            <div class="site-title">
              
              
                <div style="font-size: 0.4em;">
                  区块链、web3、金融、智能合约
                </div>

            </div>

    </a>
    <div id="search" style="margin-top: 10px" >
      <div>
        <form id="gridea-search-form" data-update="1685365345190" action="/search/index.html"><input
            class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="Search..." />
        </form>
      </div>
    </div>


    <!-- Nav -->
    <nav>
      <ul>
        <li><a href="#menu">Menu</a></li>
      </ul>
    </nav>
  </div>
</header>

<!-- Menu -->
<nav id="menu">
  <ul>
    
      
          <li><a href="https://ckp-0217.github.io" class="menu">
              主页
            </a></li>
          
            
      
          <li><a href="https://ckp-0217.github.io/archives" class="menu">
              归档
            </a></li>
          
            
      
          <li><a href="https://ckp-0217.github.io/tags" class="menu">
              标签
            </a></li>
          
            
      
          <li><a href="https://ckp-0217.github.io/signature" class="menu">
              签名
            </a></li>
          
            
      
          <li><a href="https://ckp-0217.github.io/forecast" class="menu">
              预测
            </a></li>
          
            
  </ul>
</nav>
      <!-- Main -->
      <div id="main">
        <div class="tags-container-sticky">
  
    
      
        
                  
        
                  
        
                  
        
                  
        
          
            
                  
        
          
                
          
            
                  
        
          
                
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
          
                
                  
        
          
                
          
                
                  
        
          
                
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
          
                
          
                
          
                
                  
        
          
            
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
                  
        
          
                
                  
                    <a class="tag" href="https://ckp-0217.github.io/tag/zhi-ya-jie-dai/">
                      质押借贷 <span style="color:#ed556a;font-weight: 1000;">
                          3
                        </span>
                    </a>
                    
    
      
        
                  
        
                  
        
                  
        
                  
        
          
                
          
            
                  
        
          
                
          
                
          
            
                  
        
          
                
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
          
            
                  
        
          
            
                  
        
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
          
                
                  
        
          
                
          
                
                  
        
          
                
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
          
                
          
                
          
                
                  
        
          
                
          
                
          
            
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
                  
        
          
                
                  
                    <a class="tag" href="https://ckp-0217.github.io/tag/YpOF8hrMn/">
                      DeFi <span style="color:#ed556a;font-weight: 1000;">
                          5
                        </span>
                    </a>
                    
    
      
        
                  
        
                  
        
                  
        
                  
        
          
                
          
                
                  
        
          
            
                  
        
          
                
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
          
                
                  
        
          
                
          
                
                  
        
          
                
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
          
                
          
                
          
                
                  
        
          
                
          
                
          
                
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
                  
        
          
                
                  
                    <a class="tag" href="https://ckp-0217.github.io/tag/yuan-ma-fen-xi/">
                      源码分析 <span style="color:#ed556a;font-weight: 1000;">
                          1
                        </span>
                    </a>
                    
    
      
        
                  
        
                  
        
                  
        
                  
        
          
                
          
                
                  
        
          
                
          
                
          
                
                  
        
          
            
                  
        
          
            
                  
        
          
            
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
          
                
                  
        
          
                
          
                
                  
        
          
                
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
          
                
          
                
          
                
                  
        
          
                
          
                
          
                
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
                  
        
          
                
                  
                    <a class="tag" href="https://ckp-0217.github.io/tag/jiao-yi-jie-xi/">
                      交易解析 <span style="color:#ed556a;font-weight: 1000;">
                          3
                        </span>
                    </a>
                    
    
      
        
                  
        
                  
        
                  
        
                  
        
          
                
          
                
                  
        
          
                
          
                
          
                
                  
        
          
                
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
          
            
                  
        
          
                
                  
        
          
                
                  
        
          
                
          
                
                  
        
          
                
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
          
                
          
                
          
                
                  
        
          
                
          
                
          
                
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
                  
        
          
                
                  
                    <a class="tag" href="https://ckp-0217.github.io/tag/nft/">
                      NFT <span style="color:#ed556a;font-weight: 1000;">
                          1
                        </span>
                    </a>
                    
    
      
        
                  
        
                  
        
                  
        
                  
        
          
                
          
                
                  
        
          
                
          
                
          
                
                  
        
          
                
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
          
                
                  
        
          
            
                  
        
          
                
                  
        
          
                
          
                
                  
        
          
                
          
                
                  
        
          
            
                  
        
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
          
                
          
                
          
                
                  
        
          
                
          
                
          
                
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
                  
        
          
                
                  
                    <a class="tag" href="https://ckp-0217.github.io/tag/idIT1Ofe5/">
                      开发工具 <span style="color:#ed556a;font-weight: 1000;">
                          2
                        </span>
                    </a>
                    
    
      
        
                  
        
                  
        
                  
        
                  
        
          
                
          
                
                  
        
          
                
          
                
          
                
                  
        
          
                
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
          
            
                  
        
          
                
          
                
                  
        
          
                
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
          
                
          
                
          
                
                  
        
          
                
          
                
          
                
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
                  
        
          
                
                  
                    <a class="tag" href="https://ckp-0217.github.io/tag/jin-rong-li-lun/">
                      金融理论 <span style="color:#ed556a;font-weight: 1000;">
                          1
                        </span>
                    </a>
                    
    
      
        
                  
        
                  
        
                  
        
                  
        
          
                
          
                
                  
        
          
                
          
                
          
                
                  
        
          
                
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
          
                
                  
        
          
            
                  
        
          
                
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
          
            
                  
        
          
                
          
                
          
                
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
                  
        
          
                
                  
                    <a class="tag" href="https://ckp-0217.github.io/tag/an-quan/">
                      安全 <span style="color:#ed556a;font-weight: 1000;">
                          2
                        </span>
                    </a>
                    
    
      
        
                  
        
                  
        
                  
        
                  
        
          
                
          
                
                  
        
          
                
          
                
          
                
                  
        
          
                
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
          
                
                  
        
          
                
          
            
                  
        
          
                
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
          
                
          
            
                  
        
          
                
          
                
          
                
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
                  
        
          
                
                  
                    <a class="tag" href="https://ckp-0217.github.io/tag/shen-ji/">
                      审计 <span style="color:#ed556a;font-weight: 1000;">
                          2
                        </span>
                    </a>
                    
    
      
        
                  
        
                  
        
                  
        
                  
        
          
                
          
                
                  
        
          
                
          
                
          
                
                  
        
          
                
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
          
                
                  
        
          
                
          
                
                  
        
          
            
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
          
                
                  
        
          
            
                  
        
          
                
          
                
          
                
                  
        
          
                
          
                
          
                
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
                  
        
          
                
                  
                    <a class="tag" href="https://ckp-0217.github.io/tag/dai-li-sheng-ji/">
                      代理升级 <span style="color:#ed556a;font-weight: 1000;">
                          2
                        </span>
                    </a>
                    
    
      
        
                  
        
                  
        
                  
        
                  
        
          
                
          
                
                  
        
          
                
          
                
          
                
                  
        
          
                
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
          
                
                  
        
          
                
          
                
                  
        
          
                
          
            
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
          
            
                  
        
          
                
                  
        
          
                
          
                
          
            
                  
        
          
                
          
            
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
                  
        
          
            
                  
                    <a class="tag" href="https://ckp-0217.github.io/tag/CHkr7jZdg/">
                      智能合约 <span style="color:#ed556a;font-weight: 1000;">
                          5
                        </span>
                    </a>
                    
    
      
        
                  
        
                  
        
                  
        
                  
        
          
                
          
                
                  
        
          
                
          
                
          
                
                  
        
          
                
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
          
                
                  
        
          
                
          
                
                  
        
          
                
          
                
                  
        
          
                
                  
        
                  
        
                  
        
                  
        
          
                
                  
        
          
                
                  
        
          
                
          
                
          
                
                  
        
          
                
          
                
          
                
                  
        
          
            
                  
        
          
            
                  
        
                  
        
                  
        
                  
        
                  
        
          
                
                  
                    <a class="tag" href="https://ckp-0217.github.io/tag/he-yue-ce-shi/">
                      合约测试 <span style="color:#ed556a;font-weight: 1000;">
                          2
                        </span>
                    </a>
                    
</div>
          <div class="inner">
            <div class="post-pagetitle">
              <h1>
                质押挖矿
              </h1>
            </div>
            <div class="post-info">
              <time class="post-time">
                2021-12-15
              </time>
              <span class="read-times">
                2 min read
              </span>
              
            </div>
            
                <div class="post-content-wrapper">
                  <div class="post-content">
                    <h2 id="质押类别">质押类别</h2>
<p>单币质押<br>
双币质押<br>
lp质押<br>
NFT质押</p>
<h2 id="质押周期">质押周期</h2>
<p>任意时间<br>
年月日<br>
区块</p>
<h2 id="产出">产出</h2>
<p>时间、区块 固定产出</p>
<p>时间、区块 固定产出 半衰期</p>
<p>质押数量 固定产出</p>
<h2 id="计算原理">计算原理</h2>
<p>链上不适合做定时任务去更新区块的挖矿数量，但是可以通过每次更新质押数时来更新区块的总质押产出</p>
<pre><code>1.如果产出率是固定的
△个体产出=质押数量*△时间*产出率
△总产出=总质押数量*△时间*产出率

那么△个体产出=△总产出*质押数量/总质押数量
△时间=当前区块-上次更新区块时间

方法一:
只需要维护一个用户结构体
    {
        质押数量
        上一次提取时间}
只需要在修改质押数量或者提取时 将提取时间更新到最新即可
△个体产出=质押数量*△时间*产出率

---
方法二:
维护一个用户结构体 以及 一个全局的可提取值 RewardPer 对于固定的情况可提取值就是每个区块累加
    {
        质押数量
        可提取值
    }
通过更新当前单位质押可提取数量
NewRewardPer=OldRewardPer+产出率*△时间
△个体产出=质押数量*(NewRewardPer-accountRewardPer)


2.如果单个块的产出是固定的 那么对于个体来说产出率是变化的
△个体产出=△总产出*质押数量/总质押数量
因为总的质押数量一直在变化。
那么意味着在某一位用户更新质押数量的时候就要更新所有人的质押率，这明显是不可能的，所以应该采用上面的第二种计算方式。

维护一个用户结构体 以及 一个全局的可提取值 RewardPer 对于固定的情况可提取值就是每个区块累加
    {
        质押数量
        可提取值
    }
通过更新当前单位质押可提取数量
NewRewardPer=OldRewardPer+产出率*△时间
△个体产出=质押数量*(NewRewardPer-accountRewardPer)
</code></pre>

                  </div>
                  <div class="toc-container">
                    <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E8%B4%A8%E6%8A%BC%E7%B1%BB%E5%88%AB">质押类别</a></li>
<li><a href="#%E8%B4%A8%E6%8A%BC%E5%91%A8%E6%9C%9F">质押周期</a></li>
<li><a href="#%E4%BA%A7%E5%87%BA">产出</a></li>
<li><a href="#%E8%AE%A1%E7%AE%97%E5%8E%9F%E7%90%86">计算原理</a></li>
</ul>
</li>
</ul>

                  </div>
                </div>

                <div class="page-count">
                  

                      
                </div>
                <div class="post-pagination inner">
                  
                    <div class="prev-post">
                      <div>
                        <a href="https://ckp-0217.github.io/post/evm-jiao-yi-qian-ming/">上一篇 evm交易签名</a>

                      </div>
                    </div>
                    
                  
                    <div class="next-post">
                      <div>
                        <a href="https://ckp-0217.github.io/post/he-yue-kai-fa-kuai-su-pei-zhi/">下一篇 合约开发快速配置</a>

                      </div>
                    </div>
                    
                     
                </div>

          </div>


      </div>

      <!-- back to top -->
      <button oneclik="topFunction()" id="BackToTop">
        TOP
      </button>

      <div class="post-comment inner">
        <div class="post-comment">
          





        </div>
      </div>

      <!-- Footer -->
      <!-- Footer -->
<footer id="footer">
  <div class="inner">
    <section>
      <h2>Follow</h2>
      <ul class="icons">
        
          
          <li>
            <a href="https://github.com/ckp-0217" target="_blank">
              <i class="icon brands style2 fab fa-github"></i>
            </a>
          </li>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </ul>
    </section>
    <ul class="copyright">
      <li>
        <a href="https://ckp-0217.github.io/atom.xml" target="_blank">
          RSS
        </a> 
      </li>
      <li>ckp0217@foxmail.com</li>
      
    </ul>
  </div>
</footer>
  </div>

  <!-- Scripts -->
  <script src="https://ckp-0217.github.io/media/scripts/jquery.min.js"></script>
  <script src="https://ckp-0217.github.io/media/scripts/browser.min.js"></script>
  <script src="https://ckp-0217.github.io/media/scripts/breakpoints.min.js"></script>
  <script src="https://ckp-0217.github.io/media/scripts/util.js"></script>
  <script src="https://ckp-0217.github.io/media/scripts/main.js"></script>
  
    <script src="https://ckp-0217.github.io/media/scripts/prism.js"></script>
    <script>
      Prism.highlightAll();
    </script>
    
      <script>
        post_scroll();
        back_to_top();
      </script>
</body>

</html>